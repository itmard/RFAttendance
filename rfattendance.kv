#:import ListItemButton kivy.uix.listview.ListItemButton

#:import TabPannel tab_panel.TabPannel
#:import MainTab tabs.main.MainTab

#:import SessionsTab tabs.sessions.SessionsTab
#:import ListSessions tabs.sessions.ListSessions
#:import ListAttendance tabs.sessions.ListAttendance

#:import MembersTab tabs.members.MembersTab
#:import ListMembers tabs.members.ListMembers
#:import NewMember tabs.members.NewMember
#:import ViewMember tabs.members.ViewMember

#:import ExportTab tabs.export.ExportTab
#:import LoginTab tabs.login.LoginTab

TabPannel:
    do_default_tab: False
    tab_width: '100dp'
    SessionsTab:
    MembersTab:
    ExportTab:
    # LoginTab:
 

<SessionsTab>:
    text: 'Sessions'
    SessionsScreenManager:
        ListSessions:
        ListAttendance:
    

<ListSessions>:
    name: 'list_sessions'
    BoxLayout:
        orientation: 'vertical'
        ListView:
            id: session_list
        AnchorLayout:
            anchor_y: 'bottom'
            size_hint_y: 0.05
            BoxLayout:
                TextInput:
                    id: session_name
                    multiline: False
                    on_text_validate: root.create_new_session()
                Button:
                    text: 'Create'
                    on_press: root.create_new_session()
                    size_hint_x: 0.3


<ListAttendance>:
    name: 'list_attendance'
    BoxLayout:
        orientation: 'vertical'
        ListView:
            id: attendance_list


<MembersTab>:
    text: 'Members'
    MembersScreenManager:
        ListMembers:
        NewMember:
        ViewMember:


<ListMembers>:
    name: 'list_members'
    BoxLayout:
        orientation: 'vertical'
        ListView:
            id: member_list
        AnchorLayout:
            anchor_y: 'bottom'
            size_hint_y: 0.05
            Button:
                text: 'New Member'
                on_press: root.new_member()


<NewMember>:
    name: 'new_member'
    BoxLayout:
        orientation: 'vertical'
        GridLayout:       
            cols: 2       
            spacing: '5dp'
            padding: '5dp'
            row_default_height: '40dp'
            row_force_default: True
            Label:        
                text: 'Tag ID'
            TextInput:    
                id: tag_id
                readonly: True
                background_color: [.8, .8, .8, 1]
            Label:        
                text: 'Name'
            TextInput:    
                id: member_name  
                focus: True
                multiline: False
                on_text_validate: root.register()
        Button:
            size_hint_y: 0.05
            id: register_member
            text: 'Register'
            on_press: root.register()


<ViewMember>:
    name: 'view_member'
    BoxLayout:
        orientation: 'vertical'
        ListView:
            id: session_list


<ExportTab>:
    text: 'Export'
    BoxLayout:
        orientation: 'vertical'
        ListView:
            id: exported_list
        AnchorLayout:
            anchor_y: 'bottom'
            size_hint_y: 0.05
            Button:
                text: 'Export'
                on_press: root.export()

<LoginTab>:
    text: 'Login'
    GridLayout:
        cols: 1
        Label:
            id: status_label
            size_hint_y: None
            height: '40dp'
        GridLayout:
            cols: 2
            row_default_height: '40dp'
            row_force_default: True
            spacing: '10dp'
            padding: '10dp'
            Label:
                text: 'Username'
            TextInput:
                id: username_input
                multiline: False
            Label:
                text: 'Password'
            TextInput:
                id: password_input
                multiline: False
                password: True
            Label:
                text: 'Remember Me'
            CheckBox:
                id: remember_me
                active: False
        Button:
            size_hint_y: None
            height: '40dp'
            text: 'Login'
            on_press: root.login()

